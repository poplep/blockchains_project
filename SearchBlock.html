<!DOCTYPE html>
<html>
<title>Blockchain UI</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<!-- Importing Fonts and Libraries -->
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<link href="https://fonts.googleapis.com/css?family=Lato" rel="stylesheet">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<link href="https://fonts.googleapis.com/css?family=Pavanam" rel="stylesheet">


<!-- Style for the tile buttons -->
<style>
	div.gallery {
		margin: 5px;
		border: 1px solid #ccc;
		float: left;
		width: 300px;
	}
	
	div.gallery:hover {
		border: 1px solid #777;
	}
	
	div.gallery img {
		width: 100%;
		height: auto;
	}
	
	div.desc {
		padding: 15px;
		text-align: center;
	}
	</style>

<!-- Overall Page Styling -->
<!-- Styling for blocks -->
<style>
	.block {
		width: 350px;
		height: 350px;
		padding: 10px;
		float:left;
		border: 2px solid rgb(49, 57, 77);
		border-radius: 10px;
		background-color:rgb(49, 57, 77);
		font-family: 'Pavanam', sans-serif;
		color: black;
		margin:10px;

	}

</style>
<style>
p,h1,h2,h3,h4,h5,body {font-family: 'Pavanam', sans-serif;}
p,h5 {font-size: 22px; font-family: 'Pavanam', sans-serif;};
pre {font-size: 18px; font-family: 'Pavanam', sans-serif; overflow-x:hidden;};
a {font-size: 15px; font-family: 'Pavanam', sans-serif;};
		.under { text-decoration: underline rgb(0, 0, 0);}
		input[type=text], select {
			width: 50%;
			padding: 12px 20px;
			margin: 8px 0;
			display: inline-block;
			border: 1px solid #ccc;
			border-radius: 4px;
			box-sizing: border-box;
		}
			
		input[type=data], select {
			width: 50%;
			height: 150px;
			padding: 12px 20px;
			margin: 8px 0;
			display: inline-block;
			border: 1px solid #ccc;
			border-radius: 4px;	
		}
	
		input[type=submit] {
			width: 50%;
			background-color: rgb(49, 57, 77);
			color: white;
			padding: 14px 20px;
			margin: 8px 0;
			border: none;
			border-radius: 4px;
			cursor: pointer;
		}
	
		input[type=submit]:hover {
			background-color: rgb(49, 57, 77);
		}
		.button {
			background-color: rgb(49, 57, 77); 
			border: none;
			color: white;
			padding: 15px 32px;
			text-align: center;
			text-decoration: none;
			display: inline-block;
			margin: 4px 2px;
			cursor: pointer;
		}
		.button1 {font-size: 24px;}
			
		.w3-container {
			background-color:rgb(49, 57, 77);
		}
		.w3-sidebar {
			background-color:rgb(49, 57, 77);
		}
		pre {
			word-wrap: break-word;
		}
		.w3-bar-item {
			padding: 20px;
			margin: -5px;
		}

				.modal-content {
			width:750px;
			background-color:rgb(49, 57, 77);
		}

		.modal-body {
			overflow-y: scroll;
			height: 750px;
			background-color:rgb(49, 57, 77);
		}
</style>
<head></head>
<body>


	<!-- Block Modal Window -->
	<div class="container">
  
			<!-- Modal Window -->
			<div class="modal fade" id="blockContent" role="dialog">
			  <div class="modal-dialog">
			  
				<!-- Modal content-->
				<div class="modal-content" id="blockModalContent" data-dismiss="modal">
				  <div class="modal-header">
					<button type="button" class="close" data-dismiss="modal" style="color: white; font-size: 20px">&times;</button>
					<h4 class="modal-title" style="color: white">Here's your block:</h4>
				  </div>
				  <div class="modal-body">
	
						<a href="#" style="color:white" data-toggle="tooltip" data-placement="right" title="The person's name." style="font-size:18px" style="color: white">Name:</a><br>
						<pre id="modalName" style="overflow-x:hidden; overflow-y: hidden"></pre>
			
						<a href="#" style="color:white" data-toggle="tooltip" data-placement="right" title="The person's ID number." style="font-size:18px" style="color: white">ID:</a><br>
						<pre id="modalID" style="overflow-x:hidden; overflow-y: hidden"></pre>
			
						<a href="#" style="color:white" data-toggle="tooltip" data-placement="right" title="The person's age." style="font-size:18px" style="color: white">Age:</a><br>
						<pre id="modalAge" style="overflow-x:hidden; overflow-y: hidden"></pre>
						
						<a href="#" style="color:white" data-toggle="tooltip" data-placement="right" title="In proof-of-work mining, this is how hard it is to verify blocks on the network." style="font-size:18px" style="color: white">Difficulty:</a><br>
						<pre id="modalDifficulty" style="overflow-x:hidden; overflow-y: hidden"></pre>
			
						<a href="#" style="color:white" data-toggle="tooltip" data-placement="right" title="Extra data that is stored in the block." style="font-size:18px" style="color: white">extraData:</a><br>
						<pre id="modalextraData" style="overflow-x:hidden; overflow-y: hidden"></pre>
			
						<a href="#" style="color:white" data-toggle="tooltip" data-placement="right" title="The limit of gas that can be used per block transaction." style="font-size:18px" style="color: white">gasLimit:</a><br>
						<pre id="modalgasLimit" style="overflow-x:hidden; overflow-y: hidden"></pre>
			
						<a href="#" style="color:white" data-toggle="tooltip" data-placement="right" title="The amount of gas used during this block's transaction." style="font-size:18px" style="color: white">gasUsed:</a><br>
						<pre id="modalgasUsed" style="overflow-x:hidden; overflow-y: hidden"></pre>
			 
						<a href="#" style="color:white" data-toggle="tooltip" data-placement="right" title="The block's hash which consists of the hash of its previous block." style="font-size:18px" style="color: white">hash:</a><br>
						<pre id="modalhash" style="overflow-x:hidden; overflow-y: hidden"></pre>
	
						<a href="#" style="color:white" data-toggle="tooltip" data-placement="right" title="The bloom filter for the logs of the block. This is null when it is a pending block." style="font-size:18px" style="color: white">logsBloom:</a><br>
						<pre id="modallogsBloom" style="overflow-y: hidden"></pre>
			
						<a href="#" style="color:white" data-toggle="tooltip" data-placement="right" title="The address of the miner that mined the block." style="font-size:18px" style="color: white">miner:</a><br>
						<pre id="modalminer" style="overflow-x:hidden; overflow-y: hidden"></pre>
			
						<a href="#" style="color:white" data-toggle="tooltip" data-placement="right" title="Calculated from the nonce as an intermediate value when validating proof-of-work." style="font-size:18px" style="color: white">mixHash:</a><br>
						<pre id="modalmixHash" style="overflow-x:hidden; overflow-y: hidden"></pre>
			
						<a href="#" style="color:white" data-toggle="tooltip" data-placement="right" title="Hash of the generated proof-of-work." style="font-size:18px" style="color: white">nonce:</a><br>
						<pre id="modalnonce" style="overflow-x:hidden; overflow-y: hidden"></pre>
			
						<a href="#" style="color:white" data-toggle="tooltip" data-placement="right" title="The block's number or ID." style="font-size:18px" style="color: white">number:</a><br>
						<pre id="modalnumber" style="overflow-x:hidden; overflow-y: hidden"></pre>
			
						<a href="#" style="color:white" data-toggle="tooltip" data-placement="right" title="The hash of the parent/previous block." style="font-size:18px" style="color: white">parentHash:</a><br>
						<pre id="modalparentHash" style="overflow-x:hidden; overflow-y: hidden"></pre>
			
						<a href="#" style="color:white" data-toggle="tooltip" data-placement="right" title="The root of the receipts trie of the block." style="font-size:18px" style="color: white">receiptsRoot:</a><br>
						<pre id="modalreceiptsRoot" style="overflow-x:hidden; overflow-y: hidden"></pre>
			
						<a href="#" style="color:white" data-toggle="tooltip" data-placement="right" title="SHA3 of the uncles data in the block." style="font-size:18px" style="color: white">sha3Uncles:</a><br>
						<pre id="modalsha3Uncles" style="overflow-x:hidden; overflow-y: hidden"></pre>
			
						<a href="#" style="color:white" data-toggle="tooltip" data-placement="right" title="The size of the block in bytes." style="font-size:18px" style="color: white">size:</a><br>
						<pre id="modalsize" style="overflow-x:hidden; overflow-y: hidden"></pre>
			
						<a href="#" style="color:white" data-toggle="tooltip" data-placement="right" title="The root of the final state trie of the block." style="font-size:18px" style="color: white">stateRoot:</a><br>
						<pre id="modalstateRoot" style="overflow-x:hidden; overflow-y: hidden"></pre>
			
						<a href="#" style="color:white" data-toggle="tooltip" data-placement="right" title="The time that the block was mined to the blockchain." style="font-size:18px" style="color: white">timestamp:</a><br>
						<pre id="modaltimestamp" style="overflow-x:hidden; overflow-y: hidden"></pre>
			
						<a href="#" style="color:white" data-toggle="tooltip" data-placement="right" title="The integer value of the total difficulty of the chain until this current block." style="font-size:18px" style="color: white">totalDifficulty:</a><br>
						<pre id="modaltotalDifficulty" style="overflow-x:hidden; overflow-y: hidden"></pre>
			
						<a href="#" style="color:white" data-toggle="tooltip" data-placement="right" title="The array of transaction objects." style="font-size:18px" style="color: white">transactions:</a><br>
						<pre id="modaltransactions" style="overflow-x:hidden; overflow-y: hidden"></pre>
			
						<a href="#" style="color:white" data-toggle="tooltip" data-placement="right" title="The root of the transaction trie of the block." style="font-size:18px" style="color: white">transactionsRoot:</a><br>
						<pre id="modaltransactionsRoot" style="overflow-x:hidden; overflow-y: hidden"></pre>
			
						<a href="#" style="color:white" data-toggle="tooltip" data-placement="right" title="The array of uncle hashes if there are any." style="font-size:18px" style="color: white">uncles:</a><br>
						<pre id="modaluncles" style="overflow-x:hidden; overflow-y: hidden"></pre>
	
				
				  </div>
				  <div class="modal-footer">
					<button class="btn btn-default" id="exit" data-dismiss="modal">Close</button>
	
				  </div>
				</div>
				
			  </div>
			</div>
			
		  </div>
<!-- Sidebar/menu -->
<div position = "absolute">
	<nav class="w3-sidebar w3-collapse" style="z-index:3; width: 12%" id="mySidebar"><br>
		<div class="w3-bar-block">
			<a href="HomePage.html" style="color: white; font-size: 26px"><h5><button class="w3-bar-item w3-button tablink">Home</button></h5></a>

			<div><h5 class="w3-bar-block" style="color: white; font-size: 26px">&nbsp;Blockchains</h5></div>
			<a href="Blockchain.html" style="color: white"><button class="w3-bar-item w3-button tablink"> About</button></a>
			<a href="BlockchainFAQ.html" style="color: white"><button class="w3-bar-item w3-button tablink"> FAQ</button></a>
			<a href="BlockchainAbout.html" style="color: white"><button class="w3-bar-item w3-button tablink"> About our Application </button></a>
			<a href="Guide.html" style="color: white"><button class="w3-bar-item w3-button tablink"> A Guide to Blockchain</button></a>
			<a href="BlockchainDataLossTampering.html" style="color: white"><button class="w3-bar-item w3-button tablink "> Blockchains for Preventing Data Loss and Tampering</button></a>

			<div><b><h5 class="w3-bar-block" style="color: white; font-size: 20px">&nbsp;Blockchain Functionality</h5></b></div>
			<a href="AddBlock.html" style="color: white"><button class="w3-bar-item w3-button tablink"> Add Block</button></a>
			<a href="SearchBlock.html" style="color: white"><button class="w3-bar-item w3-button tablink" > Search for a Block</button></a>
			<a href="ViewBlockAdvanced.html" style="color: white"><button class="w3-bar-item w3-button tablink"> View the Blockchain - Advanced</button></a>
			<a href="ViewBlockLedger.html" style="color: white"><button class="w3-bar-item w3-button tablink"> View the Blockchain - Ledger</button></a>
			<a href="BlockStats.html" style="color: white"><button class="w3-bar-item w3-button tablink"> Blockchain Statistics</button></a>

	
			<div><h5 class="w3-bar-block" style="color: white; font-size: 26px">&nbsp;Blockchain Alternatives</h5></div>
			<a href="HashgraphAbout.html" style="color: white"><button class="w3-bar-item w3-button tablink"> Hashgraph </button></a>
			<a href="TangleAbout.html" style="color: white"><button class="w3-bar-item w3-button tablink"> Tangle </button></a>
			<a href="HyperledgerAbout.html" style="color: white"><button class="w3-bar-item w3-button tablink"> Hyperledger </button></a>
			<a href="CordaAbout.html" style="color: white"><button class="w3-bar-item w3-button tablink"> Corda </button></a>
			<a href="DCSFAQ.html" style="color: white"><button class="w3-bar-item w3-button tablink"> FAQ </button></a>
			<a href="DCSDataLossTampering.html" style="color: white"><button class="w3-bar-item w3-button tablink"> Preventing Data Loss and Tampering</button></a>
			<a href="Comparison.html" style="color: white"><button class="w3-bar-item w3-button tablink"> Comparing Blockchain, Hyperledger, Corda, Tangle, and Hashgraph</button></a>

			<div><h5 class="w3-bar-block" style="color: white; font-size: 26px">&nbsp;Help Section</h5></div>
			<a href="Help.html" style="color: white"><button class="w3-bar-item w3-button tablink"> Help</button></a>
			<a href="ReportBug.html"style="color: white" ><button class="w3-bar-item w3-button tablink"> Report a Bug</button></a>
			<a href="Tutorial.html"style="color: white" ><button class="w3-bar-item w3-button tablink"> App Tutorial</button></a><br><br>
		</div>
	  </nav>
	  </div>
<!Each Page>
<div style="margin-left:13%" style="width:100vw" position ="fixed" >
	
		<div class="w3-container" style= "margin-left:-1.5%" color= "rgb(49, 57, 77)">
			<h1 style="color: white">Search for a Block</h1>
		</div>
		<br>
		<form id='form-prompt'>
				<a href="#" data-toggle="tooltip" data-placement="right" title="The name that you entered into the block." style="font-size:18px" style="color: black">Enter Name:</a><br>
            <input type='text' id="nameTest">
				<input type="submit" id="button1"/><br>
				<a href="#" data-toggle="tooltip" data-placement="right" title="The id that you entered into the block." style="font-size:18px" style="color: black">Enter ID:</a><br>
			<input type='text' id="idTest">
				<input type="submit" id="button2"/><br>
				<a href="#" data-toggle="tooltip" data-placement="right" title="The age that you entered into the block." style="font-size:18px" style="color: black">Enter Age:</a><br>
			<input type='text' id="ageTest">
        <input type="submit" id="button3"/>
			</form>
			
           
		<p>Once you add the block, it will be displayed below:</p>
		<div class="block"  id="duplicater0">	

				<a href="#" style="color:white" data-toggle="tooltip" data-placement="right" title="The person's name." style="font-size:18px" style="color: white">Name:</a><br>
				<pre id="name0"></pre><br>
	
				<a href="#" style="color:white" data-toggle="tooltip" data-placement="right" title="The person's ID number." style="font-size:18px" style="color: white">ID:</a><br>
				<pre id="id0"></pre><br>
	
				<a href="#" style="color:white" data-toggle="tooltip" data-placement="right" title="The person's age." style="font-size:18px" style="color: white">Age:</a><br>
				<pre id="age0" type="text"></pre><br>
	
				<center><button class="btn btn-default" id="exit0" data-dismiss="modal">See More</button></center>
	
				</div>	

</div>

<script>
		$(document).ready(function(){
				$('[data-toggle="tooltip"]').tooltip();   
		});
		</script>
<!-- Search History -->
<script>

    var store = {

		keyCount:0,
		commandCount:0,
		prevCommand:[],
		put : function(val) {        
			this.commandCount++;
			this.keyCount = this.commandCount;
			this.prevCommand.push(val);        
		},
		get : function() {
			this.keyCount--;
			if(typeof this.prevCommand[this.keyCount] !== "undefined") {
				return this.prevCommand[this.keyCount];
			}    
		}    

	}

$("#form-prompt").on("submit", function (e) {
	store.put($('#textTest').val())
	e.preventDefault();
    $('#textTest').val('');	
});

$(document).keydown(function(event){
	if(event.which == 38 && $("#textTest").is(":focus")){
         var val = store.get();
		 val && $('#res').append('<hr>'+val);
	}else if(event.which == 40 && $("#command-text").is(":focus")) {

	}
});
</script>

<!-- Search Functionality (from view block)-->

<script>
	
	var web3 =  new Web3(web3.currentProvider); //provider for web3

	//remove special characters from the name so it can be displayed properly to the user
	function removeSpecialChars(strVal)
				{
				strVal = strVal.replace(/[^a-z\d\s]+/gi, "");
				return strVal;
				}
//contract abi, pass json representation of contract to instance
var addBlockContract = web3.eth.contract([
{
	"constant": true,
	"inputs": [
		{
			"name": "key",
			"type": "uint256"
		}
	],
	"name": "getName",
	"outputs": [
		{
			"name": "",
			"type": "bytes32"
		}
	],
	"payable": false,
	"stateMutability": "view",
	"type": "function"
},
{
	"constant": true,
	"inputs": [
		{
			"name": "key",
			"type": "uint256"
		}
	],
	"name": "getID",
	"outputs": [
		{
			"name": "",
			"type": "uint256"
		}
	],
	"payable": false,
	"stateMutability": "view",
	"type": "function"
},
{
	"constant": true,
	"inputs": [
		{
			"name": "key",
			"type": "uint256"
		}
	],
	"name": "getBlockNum",
	"outputs": [
		{
			"name": "",
			"type": "uint256"
		}
	],
	"payable": false,
	"stateMutability": "view",
	"type": "function"
},
{
	"constant": true,
	"inputs": [
		{
			"name": "key",
			"type": "uint256"
		}
	],
	"name": "getAge",
	"outputs": [
		{
			"name": "",
			"type": "uint256"
		}
	],
	"payable": false,
	"stateMutability": "view",
	"type": "function"
},
{
	"constant": true,
	"inputs": [
		{
			"name": "",
			"type": "uint256"
		}
	],
	"name": "blockchain",
	"outputs": [
		{
			"name": "age",
			"type": "uint8"
		},
		{
			"name": "id",
			"type": "uint256"
		},
		{
			"name": "name",
			"type": "bytes32"
		},
		{
			"name": "blockNum",
			"type": "uint256"
		}
	],
	"payable": false,
	"stateMutability": "view",
	"type": "function"
},
{
	"constant": false,
	"inputs": [
		{
			"name": "data",
			"type": "bytes32"
		},
		{
			"name": "uage",
			"type": "uint8"
		},
		{
			"name": "uid",
			"type": "uint256"
		}
	],
	"name": "addData",
	"outputs": [],
	"payable": true,
	"stateMutability": "payable",
	"type": "function"
}
]);
			var view = addBlockContract.at('0xff22e3e85df986e12d68358e9e4982d92632cd6f'); // contract instance to work with
		function wait(ms)
				{
				var d = new Date();
				var d2 = null;
				do { d2 = new Date(); }
				while(d2-d < ms);
				}
		var idTest = document.getElementById('idTest');
		var ageTest = document.getElementById('ageTest');
		var nameTest = document.getElementById('nameTest');
		var button1 = document.getElementById('button1');
		var button2 = document.getElementById('button2');
		var button3 = document.getElementById('button3');
		var nextsearch = 0;
		var ID = [];
		var age = [];
		var name1 = [];
		var elementcount = 0;
		var elementloop = 0;
		var iterate = 0;
		var difficultyVals = [];
		var extraDataVals = [];
		var gasLimitVals = [];
		var gasUsedVals = [];
		var hashVals = [];
		var logsBloomVals = [];
		var minerVals = [];
		var mixHashVals = [];
		var nonceVals = [];
		var numberVals = [];
		var parentHashVals = [];
		var receiptsRootVals = [];
		var sha3UnclesVals = [];
		var sizeVals = [];
		var stateRootVals = [];
		var timestampVals = [];
		var totalDifficultyVals = [];
		var transactionsVals = [];
		var transactionsRootVals = [];
		var unclesVals = [];
		var blockcount = 0;
		var elements = [];
		var blocknumbers = [];
		//click handler - searching by name
		button1.addEventListener('click', function() {
			//clear val arrays
			 ID = [];
			 age = [];
			 name1 = [];
			 blockNum = [];
			 difficultyVals = [];
			 extraDataVals = [];
			 gasLimitVals = [];
			 gasUsedVals = [];
			 hashVals = [];
			 logsBloomVals = [];
			 minerVals = [];
			 mixHashVals = [];
			 nonceVals = [];
			 numberVals = [];
			 parentHashVals = [];
			 receiptsRootVals = [];
			 sha3UnclesVals = [];
			 sizeVals = [];
			 stateRootVals = [];
			 timestampVals = [];
			 totalDifficultyVals = [];
			 transactionsVals = [];
			 transactionsRootVals = [];
			 unclesVals = [];
			//if no name was entered into the search field, then let the user know and exit the function
			
			if(nameTest.value.length == 0) {
				alert("No input received. Please enter your information and try again.");
				return;
			}
			//clearing old blocks before executing search
			var x;
			for(x = 0; x <= nextsearch; x++) {
				$("#name" + x).empty();
				$("#id" + x).empty();
				$("#age" + x).empty();
				$("#modalDifficulty" + x).empty();
				$("#modalextraData" + x).empty();
				$("#modalgasLimit" + x).empty();
				$("#modalgasUsed" + x).empty();
				$("#modalhash" + x).empty();
				$("#modallogsBloom" + x).empty();
				$("#modalminer" + x).empty();
				$("#modalmixhash" + x).empty();
				$("#modalnonce" + x).empty();
				$("#modalnumber" + x).empty();
				$("#modalparentHash" + x).empty();
				$("#modalreceiptsRoot" + x).empty();
				$("#modalsha3Uncles" + x).empty();
				$("#modalsize" + x).empty();
				$("#modalstateRoot" + x).empty();
				$("#modaltimestamp" + x).empty();
				$("#modaltotalDifficulty" + x).empty();
				$("#modaltransactions" + x).empty();
				$("#modaltransactionsRoot" + x).empty();
				$("#modaluncles" + x).empty();
			}
			//clear out all the data displayed in the blocks from the previous search and remove the blocks except for the first one
			for(x = 1; x <= nextsearch; x++) {
				$("#duplicater" + x).remove();
				$("#name" + x).empty();
				$("#id" + x).empty();
				$("#age" + x).empty();
				$("#modalDifficulty" + x).empty();
				$("#modalextraData" + x).empty();
				$("#modalgasLimit" + x).empty();
				$("#modalgasUsed" + x).empty();
				$("#modalhash" + x).empty();
				$("#modallogsBloom" + x).empty();
				$("#modalminer" + x).empty();
				$("#modalmixhash" + x).empty();
				$("#modalnonce" + x).empty();
				$("#modalnumber" + x).empty();
				$("#modalparentHash" + x).empty();
				$("#modalreceiptsRoot" + x).empty();
				$("#modalsha3Uncles" + x).empty();
				$("#modalsize" + x).empty();
				$("#modalstateRoot" + x).empty();
				$("#modaltimestamp" + x).empty();
				$("#modaltotalDifficulty" + x).empty();
				$("#modaltransactions" + x).empty();
				$("#modaltransactionsRoot" + x).empty();
				$("#modaluncles" + x).empty();
				console.log("Removed old blocks");
				
			}

			console.log("RES:" + nameTest.value);
			key = 1;
			var blockcount = 0;
			nextsearch = 0;
			elementloop = 0;
			blocknumbers = [];
			elements = [];
			elementcount = 0;

			function addID(key, test){
				view.getID(key, function(worked, result){
					ID.push(result.c["0"]);
				});
				viewingBlockAge(key, test);
			}

			function viewingBlockID(key, test) {	
				view.getID(key, function(worked, result){
					if(result.c["0"]){
						viewingBlockName(key, test);
					}else{
						console.log("All keys found");

						if(ID.length == 0) {
							alert("No blocks found matching your search criteria.");
						}
						//TODO: call method that will draw blocks for user here!!!
						var i;
						elementloop = 0;
						setTimeout(function(){  
							for(i = 0; i < blocknumbers.length; i++) {
								if(i == blocknumbers.length-1) {
									newBlock(ID[i], age[i], name1[i], elements[elementloop], elements[elementloop+1], elements[elementloop+2], elements[elementloop+3], elements[elementloop+4], elements[elementloop+5], elements[elementloop+6], elements[elementloop+7], elements[elementloop+8], elements[elementloop+9], elements[elementloop+10], elements[elementloop+11], elements[elementloop+12], elements[elementloop+13], elements[elementloop+14], elements[elementloop+15], elements[elementloop+16], elements[elementloop+17], elements[elementloop+18], elements[elementloop+19]);
									elementloop+=20;
									console.log("ELEMENT LOOP ------->" + elementloop);

								}else {
									newBlock(ID[i], age[i], name1[i], elements[elementloop], elements[elementloop+1], elements[elementloop+2], elements[elementloop+3], elements[elementloop+4], elements[elementloop+5], elements[elementloop+6], elements[elementloop+7], elements[elementloop+8], elements[elementloop+9], elements[elementloop+10], elements[elementloop+11], elements[elementloop+12], elements[elementloop+13], elements[elementloop+14], elements[elementloop+15], elements[elementloop+16], elements[elementloop+17], elements[elementloop+18], elements[elementloop+19]);
									elementloop+=20;
									console.log("ELEMENT LOOP ------->" + elementloop);
									duplicate();
								}
							
							}
						}, 1000);
						seemore();
						return;
					}
				})
			}
			
			function viewingBlockAge(key, test) {
				view.getAge(key, function(worked, result){
					console.log(result.c["0"]);
					age.push(result.c["0"]);
				})
			}

			function viewingBlockNum(key) {
					view.getBlockNum(key, function(worked, result){
							console.log(result.c["0"]);
							blockNum.push(result.c["0"]);
							setTimeout(function(){  
							var block = web3.eth.getBlock(blockNum[key - 1], function(error, result){
									if(!error){
										console.log("FOUND BLOCK KEY: " + key);
										var elementcount = 0;
										for(const [key, value] of Object.entries(result)) {
											console.log("VALUE SAVED:" + `${key}`  + ` ${value}`);
											
											elements.push(`${value}`);
											console.log("STORED IN ELEMENT ARRAY:" + elements[elementcount]);
											elementcount++;
											
										}
									}
									blockcount++;
									

									iterate++;
								
									console.log("END!!!!!!!!!!!!!!!!!");
									
									
								});
								}, 2);
							})
				}
			function viewingBlockName(key, test) {
				view.getName(key, function(worked, result){
					console.log(test);
					if(removeSpecialChars(web3.toAscii(result)) == test){
						name1.push(web3.toAscii(result));
						viewingBlockNum(key);
						addID(key, test);
						viewingBlockAge(key, test)
						blocknumbers.push(key);
					}
					viewingBlockID(key + 1, test);
					})		
			}
			viewingBlockID(key, nameTest.value);
		})

		//click handler - searching by ID
		button2.addEventListener('click', function() {
			//clear array vals for next search
			 ID = [];
			 age = [];
			 name1 = [];
			 blockNum = [];
			 difficultyVals = [];
			 extraDataVals = [];
			 gasLimitVals = [];
			 gasUsedVals = [];
			 hashVals = [];
			 logsBloomVals = [];
			 minerVals = [];
			 mixHashVals = [];
			 nonceVals = [];
			 numberVals = [];
			 parentHashVals = [];
			 receiptsRootVals = [];
			 sha3UnclesVals = [];
			 sizeVals = [];
			 stateRootVals = [];
			 timestampVals = [];
			 totalDifficultyVals = [];
			 transactionsVals = [];
			 transactionsRootVals = [];
			 unclesVals = [];

			if(idTest.value.length == 0) {
				alert("No input received. Please enter your information and try again.");
				return;
			}
			//clearing old blocks before executing search
			var x;
			for(x = 0; x <= nextsearch; x++) {
				$("#name" + x).empty();
				$("#id" + x).empty();
				$("#age" + x).empty();
				$("#modalDifficulty" + x).empty();
				$("#modalextraData" + x).empty();
				$("#modalgasLimit" + x).empty();
				$("#modalgasUsed" + x).empty();
				$("#modalhash" + x).empty();
				$("#modallogsBloom" + x).empty();
				$("#modalminer" + x).empty();
				$("#modalmixhash" + x).empty();
				$("#modalnonce" + x).empty();
				$("#modalnumber" + x).empty();
				$("#modalparentHash" + x).empty();
				$("#modalreceiptsRoot" + x).empty();
				$("#modalsha3Uncles" + x).empty();
				$("#modalsize" + x).empty();
				$("#modalstateRoot" + x).empty();
				$("#modaltimestamp" + x).empty();
				$("#modaltotalDifficulty" + x).empty();
				$("#modaltransactions" + x).empty();
				$("#modaltransactionsRoot" + x).empty();
				$("#modaluncles" + x).empty();
			}
			//clear out all the data displayed in the blocks from the previous search and remove the blocks except for the first one
			for(x = 1; x <= nextsearch; x++) {
				$("#duplicater" + x).remove();
				$("#name" + x).empty();
				$("#id" + x).empty();
				$("#age" + x).empty();
				$("#modalDifficulty" + x).empty();
				$("#modalextraData" + x).empty();
				$("#modalgasLimit" + x).empty();
				$("#modalgasUsed" + x).empty();
				$("#modalhash" + x).empty();
				$("#modallogsBloom" + x).empty();
				$("#modalminer" + x).empty();
				$("#modalmixhash" + x).empty();
				$("#modalnonce" + x).empty();
				$("#modalnumber" + x).empty();
				$("#modalparentHash" + x).empty();
				$("#modalreceiptsRoot" + x).empty();
				$("#modalsha3Uncles" + x).empty();
				$("#modalsize" + x).empty();
				$("#modalstateRoot" + x).empty();
				$("#modaltimestamp" + x).empty();
				$("#modaltotalDifficulty" + x).empty();
				$("#modaltransactions" + x).empty();
				$("#modaltransactionsRoot" + x).empty();
				$("#modaluncles" + x).empty();
				console.log("Removed old blocks");	
			}
			console.log("RES:" + idTest.value);
			key = 1;
			var blockcount = 0;
			nextsearch = 0;
			blocknumbers = [];
			elementloop = 0;
			elements = [];
			elementcount = 0;
			function viewingBlockID(key, test) {	
				view.getID(key, function(worked, result){
					if(result.c["0"]){
						console.log((result.c["0"]));
						if (test == Number(result.c["0"])){
							console.log("HERE");
							ID.push(result.c["0"]);
							viewingBlockNum(key)
							viewingBlockAge(key, test);
							viewingBlockName(key, test);
							blocknumbers.push(key);
						}
						viewingBlockID(key + 1, Number(test));
					}else{
						console.log("All keys found");
						if(ID.length == 0) {
							alert("No blocks found matching your search criteria.");
						}
						//TODO: call method that will draw blocks for user here!!!
						var i;
						elementloop = 0;
						setTimeout(function(){  
							for(i = 0; i < blocknumbers.length; i++) {
								if(i == blocknumbers.length-1) {
									newBlock(ID[i], age[i], name1[i], elements[elementloop], elements[elementloop+1], elements[elementloop+2], elements[elementloop+3], elements[elementloop+4], elements[elementloop+5], elements[elementloop+6], elements[elementloop+7], elements[elementloop+8], elements[elementloop+9], elements[elementloop+10], elements[elementloop+11], elements[elementloop+12], elements[elementloop+13], elements[elementloop+14], elements[elementloop+15], elements[elementloop+16], elements[elementloop+17], elements[elementloop+18], elements[elementloop+19]);
									elementloop+=20;
								}else {
									newBlock(ID[i], age[i], name1[i], elements[elementloop], elements[elementloop+1], elements[elementloop+2], elements[elementloop+3], elements[elementloop+4], elements[elementloop+5], elements[elementloop+6], elements[elementloop+7], elements[elementloop+8], elements[elementloop+9], elements[elementloop+10], elements[elementloop+11], elements[elementloop+12], elements[elementloop+13], elements[elementloop+14], elements[elementloop+15], elements[elementloop+16], elements[elementloop+17], elements[elementloop+18], elements[elementloop+19]);
									elementloop+=20;
									duplicate();
								}
							}
						}, 1000);
						seemore();
						return;
					}
				})
			}
			function viewingBlockNum(key) {
					view.getBlockNum(key, function(worked, result){
							console.log(result.c["0"]);
							blockNum.push(result.c["0"]);
							setTimeout(function(){  
							var block = web3.eth.getBlock(blockNum[key - 1], function(error, result){
									if(!error){
										console.log("FOUND BLOCK KEY: " + key);
										var elementcount = 0;
										for(const [key, value] of Object.entries(result)) {
											console.log("VALUE SAVED:" + `${key}`  + ` ${value}`);
											
											elements.push(`${value}`);
											console.log("STORED IN ELEMENT ARRAY:" + elements[elementcount]);
											elementcount++;
											
										}
									}
									blockcount++;
									

									iterate++;
								
									console.log("END!!!!!!!!!!!!!!!!!");
									
									
								});
								}, 2);
							})
				}
			function viewingBlockAge(key, test) {
				view.getAge(key, function(worked, result){
					console.log(result.c["0"]);
					age.push(result.c["0"]);
				})
			}
			function viewingBlockName(key, test) {
				view.getName(key, function(worked, result){
					console.log(result);
					console.log(result);
					name1.push(web3.toAscii(result));
				})
			}
			viewingBlockID(key, Number(idTest.value));
		})

		//click handler - searching by age
		button3.addEventListener('click', function() {
			//clear val arrays
			ID = [];
			age = [];
			name1 = [];
			blockNum = [];
			difficultyVals = [];
			extraDataVals = [];
			gasLimitVals = [];
			gasUsedVals = [];
			hashVals = [];
			logsBloomVals = [];
			minerVals = [];
			mixHashVals = [];
			nonceVals = [];
			numberVals = [];
			parentHashVals = [];
			receiptsRootVals = [];
			sha3UnclesVals = [];
			sizeVals = [];
			stateRootVals = [];
			timestampVals = [];
			totalDifficultyVals = [];
			transactionsVals = [];
			transactionsRootVals = [];
			unclesVals = [];

			if(ageTest.value.length == 0) {
				alert("No input received. Please enter your information and try again.");
			return;
			}
		//clearing old blocks before executing search
		var x;
		for(x = 0; x <= nextsearch; x++) {
			$("#name" + x).empty();
			$("#id" + x).empty();
			$("#age" + x).empty();
			$("#modalDifficulty" + x).empty();
			$("#modalextraData" + x).empty();
			$("#modalgasLimit" + x).empty();
			$("#modalgasUsed" + x).empty();
			$("#modalhash" + x).empty();
			$("#modallogsBloom" + x).empty();
			$("#modalminer" + x).empty();
			$("#modalmixhash" + x).empty();
			$("#modalnonce" + x).empty();
			$("#modalnumber" + x).empty();
			$("#modalparentHash" + x).empty();
			$("#modalreceiptsRoot" + x).empty();
			$("#modalsha3Uncles" + x).empty();
			$("#modalsize" + x).empty();
			$("#modalstateRoot" + x).empty();
			$("#modaltimestamp" + x).empty();
			$("#modaltotalDifficulty" + x).empty();
			$("#modaltransactions" + x).empty();
			$("#modaltransactionsRoot" + x).empty();
			$("#modaluncles" + x).empty();
		}
		//clear out all the data displayed in the blocks from the previous search and remove the blocks except for the first one
		for(x = 1; x <= nextsearch; x++) {
			$("#duplicater" + x).remove();
			$("#name" + x).empty();
			$("#id" + x).empty();
			$("#age" + x).empty();
			$("#modalDifficulty" + x).empty();
			$("#modalextraData" + x).empty();
			$("#modalgasLimit" + x).empty();
			$("#modalgasUsed" + x).empty();
			$("#modalhash" + x).empty();
			$("#modallogsBloom" + x).empty();
			$("#modalminer" + x).empty();
			$("#modalmixhash" + x).empty();
			$("#modalnonce" + x).empty();
			$("#modalnumber" + x).empty();
			$("#modalparentHash" + x).empty();
			$("#modalreceiptsRoot" + x).empty();
			$("#modalsha3Uncles" + x).empty();
			$("#modalsize" + x).empty();
			$("#modalstateRoot" + x).empty();
			$("#modaltimestamp" + x).empty();
			$("#modaltotalDifficulty" + x).empty();
			$("#modaltransactions" + x).empty();
			$("#modaltransactionsRoot" + x).empty();
			$("#modaluncles" + x).empty();
			console.log("Removed old blocks");
		}
		console.log("RES:" + ageTest.value);
		key = 1;
		var blockcount = 0;
		nextsearch = 0;
		elementloop = 0;
		blocknumbers = [];
		elements = [];
		elementcount = 0;
		function addID(key, test){
			view.getID(key, function(worked, result){
				ID.push(result.c["0"]);
				console.log(result.c["0"])
			});
		}
		function viewingBlockID(key, test) {	
			view.getID(key, function(worked, result){
				if(result.c["0"]){
					ID.push(result.c["0"]);
					viewingBlockAge(key, test);	
					blockcount++;	
				}else{
					console.log("All keys found");
					if(ID.length == 0) {
						alert("No blocks found matching your search criteria.");
					}
					//TODO: call method that will draw blocks for user here!!!
					var i;
					elementloop = 0;
					setTimeout(function(){  
						for(i = 0; i < blocknumbers.length; i++) {
							if(i == blocknumbers.length-1) {
								newBlock(ID[i], age[i], name1[i], elements[elementloop], elements[elementloop+1], elements[elementloop+2], elements[elementloop+3], elements[elementloop+4], elements[elementloop+5], elements[elementloop+6], elements[elementloop+7], elements[elementloop+8], elements[elementloop+9], elements[elementloop+10], elements[elementloop+11], elements[elementloop+12], elements[elementloop+13], elements[elementloop+14], elements[elementloop+15], elements[elementloop+16], elements[elementloop+17], elements[elementloop+18], elements[elementloop+19]);
								elementloop+=20;
							}else {
								newBlock(ID[i], age[i], name1[i], elements[elementloop], elements[elementloop+1], elements[elementloop+2], elements[elementloop+3], elements[elementloop+4], elements[elementloop+5], elements[elementloop+6], elements[elementloop+7], elements[elementloop+8], elements[elementloop+9], elements[elementloop+10], elements[elementloop+11], elements[elementloop+12], elements[elementloop+13], elements[elementloop+14], elements[elementloop+15], elements[elementloop+16], elements[elementloop+17], elements[elementloop+18], elements[elementloop+19]);
								elementloop+=20;
								duplicate();
							}
						}
					}, 1000);
					seemore();
					return;
				}
			})
		}
		function viewingBlockNum(key) {
					view.getBlockNum(key, function(worked, result){
							console.log(result.c["0"]);
							blockNum.push(result.c["0"]);
							setTimeout(function(){  
							var block = web3.eth.getBlock(blockNum[key - 1], function(error, result){
									if(!error){
										console.log("FOUND BLOCK KEY: " + key);
										var elementcount = 0;
										for(const [key, value] of Object.entries(result)) {
											console.log("VALUE SAVED:" + `${key}`  + ` ${value}`);
											
											elements.push(`${value}`);
											console.log("STORED IN ELEMENT ARRAY:" + elements[elementcount]);
											elementcount++;
											
										}
									}
									blockcount++;
									

									iterate++;
								
									console.log("END!!!!!!!!!!!!!!!!!");
									
									
								});
								}, 2);
							})
				}
		function viewingBlockAge(key, test) {
			view.getAge(key, function(worked, result){
					if(result.c["0"] == test){
						age.push(result.c["0"]);
						viewingBlockName(key, test);
						viewingBlockNum(key);
						addID(key, test);
						console.log(result.c["0"])
						blocknumbers.push(key);	
					}
				viewingBlockID(key+1, test);
			})
		}

		function viewingBlockName(key, test) {
			view.getName(key, function(worked, result){
				console.log(web3.toAscii(result));
				name1.push(web3.toAscii(result));
			})
		}
		viewingBlockID(key, Number(ageTest.value));
	})
		
	var difficulty = document.getElementById("name");
	var extraData  = document.getElementById("id");
	var gasLimit = document.getElementById("age");

	//function to create a new block object to be displayed on page
	
	var i = 0;
	function newBlock(id, age, name, difficulty, extraData, gasLimit, gasUsed, hash, logsBloom, miner, mixHash, nonce, number, parentHash, receiptsRoot, sha3Uncles, size, stateRoot, timestamp, totalDifficulty, transactions, transactionsRoot, uncles) {
		$('#name' + i).text(removeSpecialChars(name));  
		$('#id'+ i).text(id); 
		$('#age'+ i).text(age); 
		
		difficultyVals.push(difficulty);
		extraDataVals.push(extraData);
		gasLimitVals.push(gasLimit);
		gasUsedVals.push(gasUsed);
		hashVals.push(hash);
		logsBloomVals.push(logsBloom);
		minerVals.push(miner);
		mixHashVals.push(mixHash);
		nonceVals.push(nonce);
		numberVals.push(number);
		parentHashVals.push(parentHash);
		receiptsRootVals.push(receiptsRoot);
		sha3UnclesVals.push(sha3Uncles);
		sizeVals.push(size);
		stateRootVals.push(stateRoot);
		timestampVals.push(timestamp);
		totalDifficultyVals.push(totalDifficulty);
		transactionsVals.push(transactions);
		transactionsRootVals.push(transactionsRoot);
		unclesVals.push(uncles);		
	}
	
	function duplicate() {
		var original = document.getElementById('duplicater' + nextsearch);
		var clone = original.cloneNode(true); // "deep" clone
		clone.id = "duplicater" + ++nextsearch; // there can only be one element with an ID
	
		//update IDs of children pre fields
		clone.getElementsByTagName('pre')[0].id = "name" + nextsearch;
		clone.getElementsByTagName('pre')[1].id = "id" + nextsearch;
		clone.getElementsByTagName('pre')[2].id = "age" + nextsearch;
		clone.getElementsByTagName('button')[0].id = "exit" + nextsearch;

		original.parentNode.appendChild(clone); // appends child div to previous parent div
		$('[data-toggle="tooltip"]').tooltip();  //duplicate all tooltips
	}

function seemore() {
	try {	
		setTimeout(function(){  
		$(".block").click(function(e) {
			var duplicaterid = e.target.id; // gets id of target which is seemorebutton
			//accessing block
			var blockNumber = duplicaterid.substr(4, 5);
			console.log("DUPLICATERID ------------->" + duplicaterid);
			console.log("BLOCK NUMBER ------------->" + blockNumber);
			var nameForModal = document.getElementById('name' + blockNumber).innerHTML;
			var ageForModal = document.getElementById('age' + blockNumber).innerHTML;
			var idforModal = document.getElementById('id' + blockNumber).innerHTML;
			var difficultyforModal = document.getElementById("modalDifficulty").innerHTML;
			var extraDataforModal = document.getElementById("modalextraData").innerHTML;
			var gasLimitforModal = document.getElementById("modalgasLimit").innerHTML;
			var gasUsedforModal = document.getElementById("modalgasUsed").innerHTML;
			var hashforModal = document.getElementById("modalhash").innerHTML;
			var logsBloomforModal = document.getElementById("modallogsBloom").innerHTML;
			var minerforModal = document.getElementById("modalminer").innerHTML;
			var mixhashforModal = document.getElementById("modalmixHash").innerHTML;
			var nonceforModal = document.getElementById("modalnonce").innerHTML;
			var numberforModal = document.getElementById("modalnumber").innerHTML;
			var parentHashforModal = document.getElementById("modalparentHash").innerHTML;
			var receiptsRootforModal = document.getElementById("modalreceiptsRoot").innerHTML;
			var sha3UnclesforModal = document.getElementById("modalsha3Uncles").innerHTML;
			var sizeforModal = document.getElementById("modalsize").innerHTML;
			var stateRootforModal = document.getElementById("modalstateRoot").innerHTML;
			var timestampforModal = document.getElementById("modaltimestamp").innerHTML;
			var totalDifficultyforModal = document.getElementById("modaltotalDifficulty").innerHTML;
			var transactionsforModal = document.getElementById("modaltransactions").innerHTML;
			var transactionsRootforModal = document.getElementById("modaltransactionsRoot").innerHTML;
			var unclesforModal = document.getElementById("modaluncles").innerHTML ;
			
			document.getElementById("modalName").innerHTML = name1[blockNumber];
			document.getElementById("modalAge").innerHTML = age[blockNumber];
			document.getElementById("modalID").innerHTML = ID[blockNumber];
			document.getElementById("modalDifficulty").innerHTML = difficultyVals[blockNumber];
			document.getElementById("modalextraData").innerHTML = extraDataVals[blockNumber];
			document.getElementById("modalgasLimit").innerHTML = gasLimitVals[blockNumber];
			document.getElementById("modalgasUsed").innerHTML = gasUsedVals[blockNumber];
			document.getElementById("modalhash").innerHTML = hashVals[blockNumber];
			document.getElementById("modallogsBloom").innerHTML = logsBloomVals[blockNumber];
			document.getElementById("modalminer").innerHTML = minerVals[blockNumber];
			document.getElementById("modalmixHash").innerHTML = mixHashVals[blockNumber];
			document.getElementById("modalnonce").innerHTML = nonceVals[blockNumber];
			document.getElementById("modalnumber").innerHTML = numberVals[blockNumber];
			document.getElementById("modalparentHash").innerHTML = parentHashVals[blockNumber];
			document.getElementById("modalreceiptsRoot").innerHTML = receiptsRootVals[blockNumber];
			document.getElementById("modalsha3Uncles").innerHTML = sha3UnclesVals[blockNumber];
			document.getElementById("modalsize").innerHTML = sizeVals[blockNumber];
			document.getElementById("modalstateRoot").innerHTML = stateRootVals[blockNumber];
			document.getElementById("modaltimestamp").innerHTML = timestampVals[blockNumber];
			document.getElementById("modaltotalDifficulty").innerHTML = totalDifficultyVals[blockNumber];
			document.getElementById("modaltransactions").innerHTML = transactionsVals[blockNumber];
			document.getElementById("modaltransactionsRoot").innerHTML = transactionsRootVals[blockNumber];
			document.getElementById("modaluncles").innerHTML = unclesVals[blockNumber];
			$("#blockContent").modal("show").click(function () { // show the welcome page modal
				$("#blockContent").modal('hide'); 
			});
			
		});
	}, 1000);
	}catch(e) {

	}
}
	
</script>


<script>

	var output2 = document.getElementById('output2');
	var printThis = "";
function button(evt, tab){
	
	var i, x, tablinks;
	x = document.getElementsByClassName("tab");
	for (i = 0; i < x.length; i++) {
     		x[i].style.display = "none";
  	}
  	tablinks = document.getElementsByClassName("tablink");
  	for (i = 0; i < x.length; i++) {
      		tablinks[i].className = tablinks[i].className.replace("", ""); 
  	}
  	document.getElementById(tab).style.display = "block";
  	
}
</script>

<!-- Javascript Block Creation for Viewing Blocks on Chain -->
<script>
	



</script>

</body>
</html>
